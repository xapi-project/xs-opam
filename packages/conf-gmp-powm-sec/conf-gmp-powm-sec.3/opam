opam-version: "2.0"
name: "conf-gmp-powm-sec"
version: "3"
synopsis:
  "Virtual package relying on a GMP lib with constant-time modular exponentiation"
description: """\
This package can only install if the GMP lib is installed on the system and
corresponds to a version that has the mpz_powm_sec function."""
maintainer: "Etienne Millon <etienne@cryptosense.com>"
authors: "Etienne Millon <etienne@cryptosense.com>"
license: "GPL-1.0-or-later"
homepage: "http://gmplib.org/"
bug-reports: "https://github.com/ocaml/opam-repository/issues"
depends: ["conf-gmp"]
flags: conf
build: [
  ["sh" "-exc" "cc -c $CFLAGS -I/usr/local/include test.c"] {os != "macos"}
  [
    "sh"
    "-exc"
    "cc -c $CFLAGS -I/opt/homebrew/include -I/opt/local/include -I/usr/local/include test.c"
  ] {os = "macos"}
]
extra-source "test.c" {
  src:
    "https://raw.githubusercontent.com/ocaml/opam-source-archives/main/patches/conf-gmp-powm-sec/test.c.3"
  checksum: [
    "sha256=388b3879530257a7e6e59b68208ee2a52de7be30e40eb4d3a54419708fdad490"
    "md5=29317f477fa828e18428660ef31064fb"
  ]
}
